(this["webpackJsonp@scalargis/viewer"]=this["webpackJsonp@scalargis/viewer"]||[]).push([[4],{1402:function(e,t,n){"use strict";n.r(t),n.d(t,"Manager",(function(){return Ne})),n.d(t,"MainMenu",(function(){return Ce})),n.d(t,"default",(function(){return we}));var l=n(6),i=n(0),o=n.n(i),a=n(8),r=n(75),c=n(708),s=n(1416),u=n(1);function d(e){e.className,e.config,e.actions;var t=e.record,n=(null===t||void 0===t||t.title,Object(i.useState)(0)),a=Object(l.a)(n,2),r=a[0],c=a[1];return Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(s.a,{model:[{label:"Dashboard",icon:"pi pi-fw pi-home"},{label:"Atividade",icon:"pi pi-fw pi-file"},{label:"Utilizadores",icon:"pi pi-fw pi-users"}],activeIndex:r,onTabChange:function(e){return c(e.index)}}),0===r?Object(u.jsx)("div",{className:"p-grid dashboard",children:"teste"}):null]})}var v=n(3),f=n(42),j=n(31),b=n(22),p=n(136);function m(e){var t=e.config,n=null===t||void 0===t?void 0:t.content_header,o=Object(i.useState)(null),a=Object(l.a)(o,2),r=a[0],c=a[1];return Object(i.useEffect)((function(){if(n.url&&n.url){var e=n.url;fetch(e).then((function(e){return e.text()})).then((function(e){c(e)})).catch((function(e){console.log("error",e)}))}}),[]),n?r?Object(u.jsx)("div",{className:"p-fluid p-grid p-pt-4 p-pb-2 catolog-snig-header",children:Object(u.jsx)("div",{className:"p-col-12 catolog-snig-header-content",dangerouslySetInnerHTML:{__html:r}})}):n.html?Object(u.jsx)("div",{className:"p-fluid p-grid p-pt-4 p-pb-2 catolog-snig-header",children:Object(u.jsx)("div",{className:"p-col-12 p-text-center catolog-snig-header-content",dangerouslySetInnerHTML:{__html:n.html}})}):n.img?Object(u.jsx)("div",{className:"p-fluid p-grid p-pt-4 p-pb-2 catolog-snig-header",children:Object(u.jsx)("div",{className:"p-col-12 p-text-center catolog-snig-header-content",children:null!==n&&void 0!==n&&n.link_url?Object(u.jsx)("a",{href:n.link_url||"#",target:"_blank",rel:"noopener noreferrer",title:n.img_title||"",children:Object(u.jsx)("img",{className:"catalog-logo",src:n.img,alt:n.img_title||""})}):Object(u.jsx)("img",{className:"catalog-logo",src:n.img,alt:n.img_title||""})})}):null:null}var h=n.p+"static/media/logo.3543c48e.svg";function g(){return Object(u.jsx)("div",{className:"p-fluid p-grid p-pt-4 p-pb-2 catolog-snig-header",children:Object(u.jsx)("div",{className:"p-col-12 p-text-center catolog-snig-header-content",children:Object(u.jsx)("a",{href:"https://snig.dgterritorio.gov.pt",target:"_blank",rel:"noopener noreferrer",title:"Abrir Portal do SNIG",children:Object(u.jsx)("img",{className:"snig-logo",src:h,alt:"SNIG"})})})})}var O=n(1412),x=n(1413),y=n(1429),N="https://snig.dgterritorio.gov.pt/rndg",C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.a;return{getCodeList:function(n){var l="".concat(e).concat(n);return t(l).then((function(e){e.headers;return e.json}))},searchAnySNIG:function(n){var l={field:"anylightsnig",sortBy:"STARTSWITHFIRST",q:n,filterField:"type",filterValue:"dataset+or+series"},i="".concat(e,"/srv/por/suggestsnig?").concat(Object(x.stringify)(l));return t(i).then((function(e){e.headers;return e.json}))},searchAny:function(n){var l={field:(null===n||void 0===n?void 0:n.field)||"anylight",sortBy:(null===n||void 0===n?void 0:n.sortBy)||"STARTSWITHFIRST",q:null===n||void 0===n?void 0:n.query,filterField:null===n||void 0===n?void 0:n.filterField,filterValue:null===n||void 0===n?void 0:n.filterFieldValue},i=(null===n||void 0===n?void 0:n.path)||"/srv/por/suggest",o="".concat(e).concat(i,"?").concat(Object(x.stringify)(l));return t(o).then((function(e){e.headers;return e.json}))},searchRegions:function(n){var l=n.filter,i={type:"CONTAINS",thesaurus:"external.place.regions",rows:n.rows||200,q:l,uri:"*QUERY*",lang:"por"},o="".concat(e,"/srv/api/registries/vocabularies/search?").concat(Object(x.stringify)(i));return t(o).then((function(e){e.headers;return e.json}))},searchCatalogSNIG:function(e){return this.searchCatalog(Object(v.a)({type:"dataset+or+series"},e))},searchCatalog:function(n){var l=Object(v.a)({_content_type:"json",fast:"index",resultType:"details"},n),i="".concat(e,"/srv/por/q?").concat(Object(x.stringify)(l));return t(i).then((function(e){e.headers;return e.json}))}}},w=function(e){var t=document.createElement("textarea");return t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),!1},k=function(e,t){if(isNaN(e))return null;var n,l,i,o=t||"{dd}-{mm}-{yyyy}";n=e.getDate(),l=e.getMonth()+1,i=e.getFullYear(),n=n.toString().padStart(2,"0"),l=l.toString().padStart(2,"0");var a=o.replace("dd",n);return a=(a=a.replace("mm",l)).replace("yyyy",i)},S=function(e){return e||N},F=function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.link)&&void 0!==t&&t.length){var n=Array.isArray(null===e||void 0===e?void 0:e.link)?e.link.map((function(e){var t=e.split("|");return{type:t[3],url:t[2],format:t[4]}})):[],l=[];if(n.length)for(var i=0;i<n.length;i++){var o=n[i];o.url.toLowerCase().indexOf("wms-c")>-1?l.push({type:"WMS-C",url:o.url}):o.url.toLowerCase().indexOf("wms")>-1?l.push({type:"WMS",url:o.url}):o.url.toLowerCase().indexOf("wmts")>-1?l.push({type:"WMTS",url:o.url}):o.url.toLowerCase().indexOf("wfs")>-1&&l.push({type:"WFS",url:o.url})}return l}},_=function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.link)&&void 0!==t&&t.length){var n=Array.isArray(null===e||void 0===e?void 0:e.link)?e.link.map((function(e){var t=e.split("|");return{type:t[3],url:t[2],format:t[4]}})):[],l=[];if(n.length)for(var i=0;i<n.length;i++){var o=n[i];o.url.toLowerCase().indexOf("zip")>-1?l.push({type:"Ficheiro",url:o.url}):o.url.toLowerCase().indexOf("wfs")>-1?l.push({type:"WFS",url:o.url}):o.url.toLowerCase().indexOf("wcs")>-1?l.push({type:"WCS",url:o.url}):o.url.toLowerCase().indexOf("atom")>-1&&l.push({type:"ATOM",url:o.url})}return l}},D=function(e){var t,n=e.id,a=e.config,r=e.items,c=e.onChange,s=Object(i.useState)(null),d=Object(l.a)(s,2),v=d[0],f=d[1],j=Object(i.useRef)(),p=Object(i.useRef)(!1),m=n||(null===a||void 0===a?void 0:a.id);Object(i.useEffect)((function(){null!==j&&void 0!==j&&j.current&&(j.current.value="")}),[r]);var h=Object(u.jsx)(O.a,{id:m,className:"text-filter",multiple:!0,field:"name",value:null!==r&&void 0!==r&&r.length?r:null!==j&&void 0!==j&&null!==(t=j.current)&&void 0!==t&&t.value?[]:null,suggestions:v,completeMethod:function(e){if(!e.query.trim().length)return f([]),!0;var t=e.query.trim(),n=S(null===a||void 0===a?void 0:a.url);C(n).searchAnySNIG(t).then((function(e){var t,n=[];null!==e&&void 0!==e&&e.length&&null!==(t=e[1])&&void 0!==t&&t.length?(e[1].forEach((function(e){n.push({name:e,code:e})})),f([].concat(n))):f(null)})).catch((function(e){return console.log(e)})).finally()},onChange:c,onFocus:function(e){j.current=e.target},onBlur:function(e){p.current=!1,setTimeout((function(){var e;if(!p.current&&null!==j&&void 0!==j&&null!==(e=j.current)&&void 0!==e&&e.value){var t=Object(b.a)(r||[]),n=j.current.value;(r||[]).find((function(e){return(e.code||"").toLowerCase()===n.trim().toLowerCase()}))?j.current.value="":c({value:[].concat(Object(b.a)(t),[{code:n,name:n}])})}}),300)},onSelect:function(e){p.current=!0,j.current.value=""}});return Object(u.jsx)(o.a.Fragment,{children:!1===(null===a||void 0===a?void 0:a.float_labels)?Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("label",{children:a.label}),h]}):Object(u.jsxs)("span",{className:"p-float-label",children:[h,Object(u.jsx)("label",{htmlFor:m,children:a.label})]})})};D.getQueryParameters=function(e,t){var n;if("any"===(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.mode))return[e.map((function(e){return e.code})).join(" or ")];var l=[];return null!==e&&void 0!==e&&e.length&&e.forEach((function(e){l.push(e.code)})),l};var A=D,I=function(e){var t,n=e.id,a=e.config,r=e.items,c=e.onChange,s=Object(i.useState)(null),d=Object(l.a)(s,2),v=d[0],f=d[1],j=Object(i.useRef)(),b=n||(null===a||void 0===a?void 0:a.id),p=Object(u.jsx)(O.a,{id:b,className:"text-filter",multiple:!0,field:"name",value:null!==r&&void 0!==r&&r.length?r:null!==j&&void 0!==j&&null!==(t=j.current)&&void 0!==t&&t.value?[]:null,suggestions:v,completeMethod:function(e){if(!e.query.trim().length)return f([]),!0;var t=e.query.trim(),n=S(null===a||void 0===a?void 0:a.url);C(n).searchRegions({filter:t,rows:200}).then((function(e){var t=[];null!==e&&void 0!==e&&e.length?(e.forEach((function(e){t.push({name:e.value,code:e.uri})})),f([].concat(t))):f(null)})).catch((function(e){return console.log(e)})).finally()},onChange:c,onFocus:function(e){j.current=e.target},onBlur:function(e){var t;null!==j&&void 0!==j&&null!==(t=j.current)&&void 0!==t&&t.value&&(j.current.value="")},onSelect:function(e){}});return Object(u.jsx)(o.a.Fragment,{children:!1===(null===a||void 0===a?void 0:a.float_labels)?Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("label",{children:a.label}),p]}):Object(u.jsxs)("span",{className:"p-float-label",children:[p,Object(u.jsx)("label",{htmlFor:b,children:a.label})]})})};I.getQueryParameters=function(e,t){var n=[];return null!==e&&void 0!==e&&e.length&&e.forEach((function(e){n.push("region:".concat(e.code))})),n};var T=I,E=function(e){var t,n=e.id,a=e.config,r=e.items,c=e.onChange,s=Object(i.useState)(null),d=Object(l.a)(s,2),f=d[0],j=d[1],p=Object(i.useRef)(),m=Object(i.useRef)(!1),h=n||(null===a||void 0===a?void 0:a.id);Object(i.useEffect)((function(){null!==p&&void 0!==p&&p.current&&(p.current.value="")}),[r]);var g=Object(u.jsx)(O.a,{id:h,className:"text-filter",multiple:!0,value:null!==r&&void 0!==r&&r.length?r:null!==p&&void 0!==p&&null!==(t=p.current)&&void 0!==t&&t.value?[]:null,suggestions:f,completeMethod:function(e){var t;if(!e.query.trim().length)return j([]),!0;var n=S(null===a||void 0===a?void 0:a.url),l=Object(v.a)(Object(v.a)({},null===a||void 0===a||null===(t=a.options)||void 0===t?void 0:t.suggest),{},{query:e.query.trim()});C(n).searchAny(l).then((function(e){var t,n=[];null!==e&&void 0!==e&&e.length&&null!==(t=e[1])&&void 0!==t&&t.length?(e[1].forEach((function(e){n.push(e)})),j([].concat(n))):j(null)})).catch((function(e){return console.log(e)})).finally()},onChange:c,onFocus:function(e){p.current=e.target},onBlur:function(e){var t;!0===(null===a||void 0===a||null===(t=a.options)||void 0===t?void 0:t.forceSelection)?p.current.value="":(m.current=!1,setTimeout((function(){var e;if(!m.current&&null!==p&&void 0!==p&&null!==(e=p.current)&&void 0!==e&&e.value){var t=Object(b.a)(r||[]),n=p.current.value;(r||[]).find((function(e){return(e.code||"").toLowerCase()===n.trim().toLowerCase()}))?p.current.value="":c({value:[].concat(Object(b.a)(t),[n])})}}),300))},onSelect:function(e){m.current=!0,p.current.value=""}});return Object(u.jsx)(o.a.Fragment,{children:!1===(null===a||void 0===a?void 0:a.float_labels)?Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("label",{children:a.label}),g]}):Object(u.jsxs)("span",{className:"p-float-label",children:[g,Object(u.jsx)("label",{htmlFor:h,children:a.label})]})})};E.getQueryParameters=function(e,t){var n;if("any"===(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.mode))return[e.join(" or ")];var l=[];return null!==e&&void 0!==e&&e.length&&e.forEach((function(e){l.push(e)})),l};var P=E,L=function(e,t){var n=Object(b.a)(e||[]),l=(null===t||void 0===t?void 0:t.sortField)||"name";return"desc"===((null===t||void 0===t?void 0:t.sortOrder)||"").toLowerCase()?n.sort((function(e,t){return t[l].localeCompare(e[l])})):n.sort((function(e,t){return e[l].localeCompare(t[l])})),Object(b.a)(n)},R=function(e){var t,n=e.id,a=e.config,r=e.items,c=e.onChange,s=Object(i.useState)([]),d=Object(l.a)(s,2),v=d[0],f=d[1],j=Object(i.useState)(null),p=Object(l.a)(j,2),m=p[0],h=p[1],g=Object(i.useRef)(),x=n||(null===a||void 0===a?void 0:a.id);Object(i.useEffect)((function(){var e,t,n,l,i,o,r,c,s;if(null!==a&&void 0!==a&&null!==(e=a.options)&&void 0!==e&&e.source&&("codelist"!==(null===a||void 0===a||null===(t=a.options)||void 0===t||null===(n=t.source)||void 0===n?void 0:n.type)||null!==a&&void 0!==a&&null!==(l=a.options)&&void 0!==l&&null!==(i=l.source)&&void 0!==i&&i.path)){var u=S(null===a||void 0===a?void 0:a.url);if("codelist"!==(null===a||void 0===a||null===(o=a.options)||void 0===o||null===(r=o.source)||void 0===r?void 0:r.type))if("suggests"!==(null===a||void 0===a||null===(c=a.options)||void 0===c||null===(s=c.source)||void 0===s?void 0:s.type));else{var d,v,j,b,p={field:null===a||void 0===a||null===(d=a.options)||void 0===d||null===(v=d.source)||void 0===v?void 0:v.field,sortBy:null===a||void 0===a||null===(j=a.options)||void 0===j||null===(b=j.source)||void 0===b?void 0:b.sortBy,q:""};C(u).searchAny(p).then((function(e){var t,n=[];null!==e&&void 0!==e&&e.length&&null!==(t=e[1])&&void 0!==t&&t.length&&(e[1].forEach((function(e){n.push({code:e,name:e})})),null!==a&&void 0!==a&&a.sortField&&(n=L(n,a)),f(n))})).catch((function(e){return console.log(e)})).finally()}else C(u).getCodeList(a.options.source.path).then((function(e){var t=[];Object.entries(e).forEach((function(e){t.push({code:e[0],name:e[1]})})),null!==a&&void 0!==a&&a.sortField&&(t=L(t,a)),f(t)})).catch((function(e){return console.log(e)})).finally()}}),[]),Object(i.useEffect)((function(){null!==g&&void 0!==g&&g.current&&(g.current.value="")}),[r]);var y=Object(u.jsx)(O.a,{id:x,className:"text-filter",dropdown:!0,multiple:!0,field:"name",value:null!==r&&void 0!==r&&r.length?r:null!==g&&void 0!==g&&null!==(t=g.current)&&void 0!==t&&t.value?[]:null,suggestions:m,completeMethod:function(e){if(null!==e&&void 0!==e&&e.query){var t=e.query,n=v.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));h(n||[])}else h(Object(b.a)(v))},onChange:c,onFocus:function(e){g.current=e.target},onBlur:function(e){g.current.value=""},onSelect:function(e){g.current.value=""}});return Object(u.jsx)(o.a.Fragment,{children:!1===(null===a||void 0===a?void 0:a.float_labels)?Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("label",{children:a.label}),y]}):Object(u.jsxs)("span",{className:"p-float-label",children:[y,Object(u.jsx)("label",{htmlFor:x,children:a.label})]})})};R.getQueryParameters=function(e,t){var n,l;if("any"===(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.mode))return[("code"===(null===t||void 0===t||null===(l=t.options)||void 0===l?void 0:l.field)?e.map((function(e){return e.code})):e.map((function(e){return e.name}))).join(" or ")];var i,o=[];null!==e&&void 0!==e&&e.length&&("code"===(null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.field)?e.map((function(e){return e.code})):e.map((function(e){return e.name}))).forEach((function(e){o.push(e)}));return o};var M=R,B=function(e){var t,n=e.id,a=e.config,r=e.items,c=e.onChange,s=Object(i.useState)([]),d=Object(l.a)(s,2),v=d[0],f=d[1],j=Object(i.useState)(null),p=Object(l.a)(j,2),m=p[0],h=p[1],g=Object(i.useRef)(),x=n||(null===a||void 0===a?void 0:a.id);Object(i.useEffect)((function(){var e;if(null!==a&&void 0!==a&&null!==(e=a.options)&&void 0!==e&&e.source){var t=S(null===a||void 0===a?void 0:a.url);C(t).getCodeList(a.options.source.path).then((function(e){var t=[];e.forEach((function(e){var n=a.options.source.lang?e.label[a.options.source.lang]:e.name;t.push({code:e.name,name:n})})),null!==a&&void 0!==a&&a.sortField&&(t=function(e,t){var n=Object(b.a)(e||[]),l=(null===t||void 0===t?void 0:t.sortField)||"name";return"desc"===((null===t||void 0===t?void 0:t.sortOrder)||"").toLowerCase()?n.sort((function(e,t){return t[l].localeCompare(e[l])})):n.sort((function(e,t){return e[l].localeCompare(t[l])})),Object(b.a)(n)}(t,a)),f(t)})).catch((function(e){return console.log(e)})).finally()}}),[]),Object(i.useEffect)((function(){null!==g&&void 0!==g&&g.current&&(g.current.value="")}),[r]);var y=Object(u.jsx)(O.a,{id:x,className:"text-filter",dropdown:!0,multiple:!0,field:"name",value:null!==r&&void 0!==r&&r.length?r:null!==g&&void 0!==g&&null!==(t=g.current)&&void 0!==t&&t.value?[]:null,suggestions:m,completeMethod:function(e){if(null!==e&&void 0!==e&&e.query){var t=e.query,n=v.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));h(n||[])}else h(Object(b.a)(v))},onChange:c,onFocus:function(e){g.current=e.target},onBlur:function(e){g.current.value=""},onSelect:function(e){g.current.value=""}});return Object(u.jsx)(o.a.Fragment,{children:!1===(null===a||void 0===a?void 0:a.float_labels)?Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("label",{children:a.label}),y]}):Object(u.jsxs)("span",{className:"p-float-label",children:[y,Object(u.jsx)("label",{htmlFor:x,children:a.label})]})})};B.getQueryParameters=function(e,t){var n,l;if("any"===(null===t||void 0===t||null===(n=t.options)||void 0===n?void 0:n.mode))return[("code"===(null===t||void 0===t||null===(l=t.options)||void 0===l?void 0:l.field)?e.map((function(e){return e.code})):e.map((function(e){return e.name}))).join(" or ")];var i,o=[];null!==e&&void 0!==e&&e.length&&("code"===(null===t||void 0===t||null===(i=t.options)||void 0===i?void 0:i.field)?e.map((function(e){return e.code})):e.map((function(e){return e.name}))).forEach((function(e){o.push(e)}));return o};var q=B,W=n(1430),z=n(81),Q=function(e){e.id;var t=e.config,n=e.items,l=e.onChange;Object(z.a)("pt",{firstDayOfWeek:0,dayNames:["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sab","Dom"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sab","Dom"],monthNames:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar"}),Object(z.c)("pt");var i=[null!==n&&void 0!==n&&n.length?n[0]:null,null!==n&&void 0!==n&&n.length?n[1]:null],a=Object(u.jsxs)("div",{className:"p-flex p-grid",children:[Object(u.jsx)("div",{className:"p-col-6",children:Object(u.jsx)(W.a,{placeholder:"Data in\xedcio",showIcon:!0,showButtonBar:!0,value:i[0],locale:"pt",dateFormat:"dd/mm/yy",mask:"99/99/9999",onChange:function(e){return l({value:[e.value,i[1]]})}})}),Object(u.jsx)("div",{className:"p-col-6",children:Object(u.jsx)(W.a,{placeholder:"Data fim",showIcon:!0,showButtonBar:!0,value:i[1],locale:"pt",dateFormat:"dd/mm/yy",mask:"99/99/9999",onChange:function(e){return l({value:[i[0],e.value]})}})})]});return Object(u.jsx)(o.a.Fragment,{children:(null===t||void 0===t||t.float_labels,Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("label",{children:t.label}),a]}))})};Q.getQueryParameters=function(e,t){var n=[null,null];if(null!==e&&void 0!==e&&e.length)return e[0]&&(n[0]=k(e[0],"yyyy-mm-dd")),e[1]&&(n[1]=k(e[1],"yyyy-mm-dd")),n};var G={AnySNIG:A,RegionsSNIG:T,Any:P,List:M,Tags:q,DateRange:Q},H=function(e){if(!e)return null;var t=G[e];return t||null},V=function(e){var t=e.config,n=e.items,l=e.onChange;if(null===t||void 0===t||!t.type)return null;var i=H(t.type);return i?Object(u.jsx)(i,{config:Object(v.a)({},t),items:n,onChange:l},null===t||void 0===t?void 0:t.id):null};V.getQueryParameters=function(e,t){if(null===t||void 0===t||!t.type)return null;var n=H(t.type);return n?n.getQueryParameters(e,t):null};var J=V,U=function(e){var t=e.url,n=e.float_labels,l=e.filters,i=e.filtersItems,a=e.onFilterChange,r=l||[];return Object(u.jsx)(o.a.Fragment,{children:r.map((function(e,l){return Object(u.jsx)("div",{className:"p-col-12",children:Object(u.jsx)(J,{config:Object(v.a)(Object(v.a)({},e),{},{url:t,float_labels:n}),items:i[e.id]||null,onChange:function(t){return a(e.id,t)}})},l)}))})};U.getQueryParameters=function(e,t){var n={};return e.forEach((function(e){var l;if(e.id&&null!==(l=t[e.id])&&void 0!==l&&l.length){var i=J.getQueryParameters(t[e.id],e);null!==i&&void 0!==i&&i.length&&(Array.isArray(e.query)?e.query.forEach((function(e,t){i[t]&&(n[e]=[i[t]])})):n[e.query]=Object(b.a)(i))}})),n};var Y=U,K=n(668),X=n(147),Z=n(363);var $=function(e){var t=e.text,n=e.maxLength,o=e.showAll,r=Object(i.useState)(!o),c=Object(l.a)(r,2),s=c[0],d=c[1];if((t||"").length>n){var v=s?"... mais":"... menos";return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{children:s?t.substring(0,n||300):t}),Object(u.jsx)(a.a,{label:v,className:"p-button-link",onClick:function(e){e.preventDefault(),d(!s)}})]})}return t},ee=n(54);function te(e){e.core;var t=e.utils,n=e.data,r=e.className,c=t.getWindowSize,s=t.showOnPortal,d=Object(i.useState)(!1),v=Object(l.a)(d,2),f=v[0],j=v[1],b=c()[0]<=768,p=Object(u.jsx)("div",{children:Object(u.jsx)(a.a,{label:"Fechar",icon:"pi pi-times",onClick:function(){return j(!1)}})}),m=F(n)||[];return m.length?Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(a.a,{icon:"pi pi-map",className:"p-button-outlined p-button-info ".concat(r," p-mr-1"),tooltip:"Ver Url de servi\xe7o de visualiza\xe7\xe3o (WMS, WMS-C, WMTS)",onClick:function(e){j(!0)}}),s(Object(u.jsx)(ee.a,{header:(null===n||void 0===n?void 0:n.title)||"Servi\xe7os de Visualiza\xe7\xe3o",footer:p,visible:f,style:{width:b?"90%":"35vw"},modal:!0,onHide:function(e){return j(!1)},children:m.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsxs)("strong",{children:[e.type,":"]})}),Object(u.jsxs)("div",{className:"p-grid",children:[Object(u.jsx)("div",{className:"p-col-12 p-md-11",style:{wordBreak:"break-all"},children:e.url}),Object(u.jsx)("div",{className:"p-col-12 p-md-1",children:Object(u.jsx)(a.a,{style:{marginLeft:"0px",color:"#2196F"},icon:"pi pi-copy",className:"p-button-sm p-button-rounded p-button-outlined p-button-help p-button-icon-only",onClick:function(t){t.preventDefault(),t.currentTarget.blur(),w(e.url)},tooltip:"Copiar Url",tooltipOptions:{position:"top"}})})]})]},t)}))}))]}):null}function ne(e){e.core;var t=e.utils,n=e.data,r=e.className,c=t.getWindowSize,s=t.showOnPortal,d=Object(i.useState)(!1),v=Object(l.a)(d,2),f=v[0],j=v[1],b=c()[0]<=768,p=Object(u.jsx)("div",{children:Object(u.jsx)(a.a,{label:"Fechar",icon:"pi pi-times",onClick:function(){return j(!1)}})}),m=_(n)||[];return m.length?Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(a.a,{icon:"pi pi-download",className:"p-button-outlined p-button-info ".concat(r," p-mr-1"),tooltip:"Ver Url de servi\xe7o de descarregamento (Ficheiro, WFS, WCS, ATOM)",onClick:function(e){j(!0)}}),s(Object(u.jsx)(ee.a,{header:(null===n||void 0===n?void 0:n.title)||"Servi\xe7os de Visualiza\xe7\xe3o",footer:p,visible:f,style:{width:b?"90%":"35vw"},modal:!0,onHide:function(e){return j(!1)},children:m.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsxs)("strong",{children:[e.type,":"]})}),Object(u.jsxs)("div",{className:"p-grid",children:[Object(u.jsx)("div",{className:"p-col-12 p-md-11",style:{wordBreak:"break-all"},children:e.url}),Object(u.jsx)("div",{className:"p-col-12 p-md-1",children:Object(u.jsx)(a.a,{style:{marginLeft:"0px",color:"#2196F"},icon:"pi pi-copy",className:"p-button-sm p-button-rounded p-button-outlined p-button-help p-button-icon-only",onClick:function(t){t.preventDefault(),t.currentTarget.blur(),w(e.url)},tooltip:"Copiar Url",tooltipOptions:{position:"top"}})})]})]},t)}))}))]}):null}var le=n(422);function ie(e){var t=e.core,n=(e.utils,e.componentConfig),l=e.data,o=e.className,r=Object(i.useRef)(null),c=(F(l)||[]).filter((function(e){return!Array.isArray(null===n||void 0===n?void 0:n.allow_service_types)||(null===n||void 0===n?void 0:n.allow_service_types.includes(e.type.toUpperCase()))})).map((function(e){return{label:e.type,icon:"pi pi-refresh",template:function(t,n){return Object(u.jsx)("a",{className:n.className,target:t.target,onClick:n.onClick,title:e.url,children:Object(u.jsx)("span",{className:n.labelClassName,children:t.label})})},command:function(n){var l={type:e.type,url:e.url};t.pubsub.publish("ThemeWizard/AddService",Object(v.a)(Object(v.a)({},l),{},{callback:null}))}}}));return c.length?Object(u.jsxs)("div",{children:[Object(u.jsx)(le.a,{model:c,popup:!0,ref:r,id:"popup_menu"}),Object(u.jsx)(a.a,{className:"p-button-outlined ".concat(o),label:"Mapa",icon:"pi pi-plus",onClick:function(e){return r.current.toggle(e)},"aria-controls":"popup_menu","aria-haspopup":!0})]}):null}var oe=function(e){var t={};if(Array.isArray(e.responsibleParty))for(var n=0;n<e.responsibleParty.length;n++){var l=e.responsibleParty[n].split("|");"resource"===l[1]?t.resource=l[2]:"distribution"===l[1]?t.distribution=l[2]:"metadata"===l[1]&&(t.metadata=l[2])}return t},ae=function(e){return e.revisionDate?{type:"revis\xe3o",value:k(new Date(e.revisionDate),"dd-mm-yyyy")}:!e.revisionDate&&e.creationDate?{type:"cria\xe7\xe3o",value:k(new Date(e.creationDate),"dd-mm-yyyy")}:e.revisionDate||e.creationDate||!e.publicationDate?void 0:{type:"publica\xe7\xe3o",value:k(new Date(e.publicationDate),"dd-mm-yyyy")}},re=function(e){return Array.isArray(e.topicCatLang)?e.topicCatLang.length?e.topicCatLang[0]:void 0:e.topicCatLang};function ce(e){var t,n,l=e.core,i=(e.viewer,e.mainMap,e.utils),o=(e.actions,e.componentConfig),r=e.data,c=o.url+((null===o||void 0===o?void 0:o.metadata_url)||"/srv/por/catalog.search#/metadata/");c.indexOf("{uuid}")>-1?c=c.replace("{uuid}",null===r||void 0===r||null===(t=r["geonet:info"])||void 0===t?void 0:t.uuid):c="".concat(c).concat(null===r||void 0===r||null===(n=r["geonet:info"])||void 0===n?void 0:n.uuid);var s=Object(u.jsxs)("div",{className:"p-grid",children:[Object(u.jsxs)("div",{className:"p-col-8 p-text-left",children:[Object(u.jsx)(a.a,{className:"p-mr-1 p-button-sm",tooltip:"Ver Ficha de Metadados",children:Object(u.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:"Metadados"})}),Object(u.jsx)(te,{core:l,utils:i,data:r,className:"p-button-sm"}),Object(u.jsx)(ne,{core:l,utils:i,data:r,className:"p-button-sm"})]}),Object(u.jsx)("div",{className:"p-col-4 p-text-right",children:!(!1===(null===o||void 0===o?void 0:o.allow_add_map))&&Object(u.jsx)(ie,{core:l,utils:i,componentConfig:o,data:r,className:"p-button-sm"})})]}),d=oe(r),v=ae(r),f=re(r);return Object(u.jsxs)(Z.a,{title:r.title||r.defaultTitle,subTitle:(null===d||void 0===d?void 0:d.resource)||(null===d||void 0===d?void 0:d.distribution)||"",footer:s,header:null,className:"p-mb-2",children:[v&&Object(u.jsxs)("div",{className:"p-mt-1",children:[Object(u.jsxs)("span",{className:"p-text-bold",children:["Data de Refer\xeancia",v?" (".concat(v.type,")"):"",": "]}),Object(u.jsx)("span",{children:v?v.value:""})]}),f&&Object(u.jsxs)("div",{className:"p-mt-1",children:[Object(u.jsx)("span",{className:"p-text-bold",children:"Tema(s): "}),Object(u.jsx)("span",{children:f||""})]}),(null===r||void 0===r?void 0:r.geographicCoverageDesc)&&Object(u.jsxs)("div",{className:"p-mt-1",children:[Object(u.jsx)("span",{className:"p-text-bold",children:"Cobertura: "}),Array.isArray(null===r||void 0===r?void 0:r.geographicCoverageDesc)&&r.geographicCoverageDesc.length?Object(u.jsx)("div",{children:r.geographicCoverageDesc.map((function(e){return Object(u.jsxs)("span",{children:[e.geographicCoverageDesc," "]})}))}):Object(u.jsx)("span",{children:null===r||void 0===r?void 0:r.geographicCoverageDesc})]}),Object(u.jsx)("div",{className:"p-mt-2",style:{wordBreak:"break-word"},children:Object(u.jsx)($,{text:null===r||void 0===r?void 0:r.abstract,maxLength:300,showAll:!1})})]})}var se=function(e){e.core,e.utils;var t=e.facetId,n=e.config,r=e.title,c=e.items,s=e.selectedFacets,d=e.onClickFacet,f=e.onClickFacetItem,j=e.maxRows,p=void 0===j?5:j,m=e.strings,h=void 0===m?{}:m,g=e.collapsed,O=void 0!==g&&g,x=Object(i.useState)(!1),y=Object(l.a)(x,2),N=y[0],C=y[1],w=p,k=Object(i.useMemo)((function(){return function(e,t,n){var l=Object(b.a)(e||[]);l=l.map((function(e){var l,i=e["@label"];i=(null===n||void 0===n?void 0:n[e["@value"]])||i,i=(null===t||void 0===t||null===(l=t.strings)||void 0===l?void 0:l[e["@value"]])||i;var o=Object(v.a)({},e);return o["@label"]=i,o}));var i=(null===t||void 0===t?void 0:t.sortField)||"@label";"desc"===((null===t||void 0===t?void 0:t.sortOrder)||"").toLowerCase()?l.sort((function(e,t){return t[i].localeCompare(e[i])})):l.sort((function(e,t){return e[i].localeCompare(t[i])}));var o=l.filter((function(e){return!e["@value"].includes("_undefined")&&!e["@value"].includes("_other")})),a=l.filter((function(e){return e["@value"].includes("_undefined")||e["@value"].includes("_other")}));return[].concat(Object(b.a)(o),Object(b.a)(a))}(c,n,h)}),[c]),S=function(e){var n=e.index,l=e.item;return Object(u.jsx)("li",{onClick:function(e){f(t,l["@value"])},children:Object(u.jsxs)("label",{className:"facet-item ".concat(s.includes(l["@value"])?" facet-item-selected":""),children:[Object(u.jsx)("span",{class:"facet-item-label",children:l["@label"]}),Object(u.jsxs)("span",{class:"facet-item-count p-ml-1",children:["(",l["@count"],")"]})]})},n)};return Object(u.jsxs)("div",{className:"facet ".concat(O?"facet-collapesed":""," facet-default ").concat((null===n||void 0===n?void 0:n.className)||""),children:[Object(u.jsxs)("h4",{onClick:function(){return d(t)},className:"facet-title",children:[Object(u.jsx)("i",{className:"pi ".concat(O?"pi-chevron-left":"")}),r]}),!O&&Object(u.jsx)("div",{children:Object(u.jsxs)("ul",{className:"facet-content",children:[k.slice(0,w).map((function(e,t){return S({item:e,index:t})})),k.length>w&&!N&&Object(u.jsx)("li",{children:Object(u.jsx)(a.a,{label:"Ver todos",className:"p-button-link",onClick:function(e){return C(!0)}})}),k.length>w&&N&&Object(u.jsxs)(o.a.Fragment,{children:[k.slice(w).map((function(e,t){return S({item:e,index:t})})),Object(u.jsx)("li",{children:Object(u.jsx)(a.a,{label:"Ver menos",className:"p-button-link",onClick:function(e){return C(!1)}})})]})]})})]})},ue=n(23),de={Default:se,Search:function(e){e.core,e.utils;var t=e.facetId,n=e.config,o=e.title,r=e.items,c=e.strings,s=e.selectedFacets,d=e.onClickFacet,v=e.onClickFacetItem,f=e.collapsed,j=void 0!==f&&f,b=Object(i.useState)(""),p=Object(l.a)(b,2),m=p[0],h=p[1],g=r||[];return Object(u.jsxs)("div",{className:"facet ".concat(j?"facet-collapesed":""," facet-search ").concat((null===n||void 0===n?void 0:n.className)||""),children:[Object(u.jsxs)("h4",{onClick:function(){return d(t)},className:"facet-title",children:[Object(u.jsx)("i",{className:"pi ".concat(j?"pi-chevron-left":"")}),o]}),!j&&Object(u.jsx)("div",{children:Object(u.jsx)("ul",{className:"facet-content",children:Object(u.jsxs)("div",{className:"p-flex p-grid",children:[Object(u.jsx)("div",{className:"p-col-12",children:Object(u.jsxs)("div",{className:"p-inputgroup",children:[Object(u.jsx)(ue.a,{placeholder:"Filtro",value:m,className:"facet-search-inputtext",onChange:function(e){h(e.target.value)}}),Object(u.jsx)(a.a,{icon:"pi pi-times",className:"p-button-info",tooltip:"Limpar filtro",onClick:function(e){h(""),(null===s||void 0===s?void 0:s.length)>0&&v(t,s[0])}})]})}),Object(u.jsx)("ul",{className:"p-col-12 facet-search-list",children:g.filter((function(e){var t=(e["@label"]||"").toLowerCase();return!m||t.includes(m.toLocaleLowerCase())})).map((function(e,l){return function(e){var l,i=e.index,o=e.item,a=o["@label"];return a=(null===c||void 0===c?void 0:c[o["@value"]])||a,a=(null===n||void 0===n||null===(l=n.strings)||void 0===l?void 0:l[o["@value"]])||a,Object(u.jsx)("li",{onClick:function(e){v(t,o["@value"])},children:Object(u.jsxs)("label",{className:"facet-item ".concat(s.includes(o["@value"])?" facet-item-selected":""),children:[Object(u.jsx)("span",{class:"facet-item-label",children:a}),Object(u.jsxs)("span",{class:"facet-item-count p-ml-1",children:["(",o["@count"],")"]})]})},i)}({item:e,index:l})}))})]})})})]})}},ve=function e(t){var n=de[t||"Default"];return n?n||null:e("Default")},fe=function(e){var t=e.core,n=e.utils,l=e.facetId,i=e.config,o=e.title,a=e.items,r=e.selectedFacets,c=e.onClickFacet,s=e.onClickFacetItem,d=e.maxRows,v=void 0===d?5:d,f=e.strings,j=void 0===f?{}:f,b=(e.showFilter,e.collapsed),p=void 0!==b&&b,m=ve(null===i||void 0===i?void 0:i.type);return m?Object(u.jsx)(m,{core:t,utils:n,facetId:l,config:i,items:a,title:o,maxRows:v,strings:j,collapsed:p,selectedFacets:r,onClickFacet:c,onClickFacetItem:s}):null},je=n(1431);function be(e){var t,n,r,c,s=e.core,d=e.utils,f=e.config,j=(e.title,e.data),b=e.showAll,p=void 0!==b&&b,m=e.setCollapsedFacets,h=e.onClickFacet,g=e.onClickFacetItem,O={core:s,utils:d},x=Object(v.a)(Object(v.a)({},je),f);!1===(null===f||void 0===f?void 0:f.use_default)&&(x=Object(v.a)(Object(v.a)({},x),{},{dimensions:((null===j||void 0===j||null===(c=j.summary)||void 0===c?void 0:c.dimension)||[]).filter((function(e){var t;return null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.length})).map((function(e){return{key:e["@name"],label:e["@label"]}}))}));var y=(null===(t=x)||void 0===t?void 0:t.maxDimensions)||5,N=(null===(n=x)||void 0===n?void 0:n.maxRows)||5,C=Object(i.useState)(p),w=Object(l.a)(C,2),k=w[0],S=w[1],F=function(e,t){var n,l,i=((null===(n=x)||void 0===n?void 0:n.dimensions)||[]).find((function(t){return t.key===(null===e||void 0===e?void 0:e["@name"])})),o=e.title||(null===e||void 0===e?void 0:e["@label"]);return o=(null===i||void 0===i?void 0:i.label)||o,o=null!==f&&void 0!==f&&f.strings[null===e||void 0===e?void 0:e["@name"]]||null!==f&&void 0!==f&&f.strings[null===e||void 0===e?void 0:e["@label"]]?(null===f||void 0===f?void 0:f.strings[null===e||void 0===e?void 0:e["@name"]])||(null===f||void 0===f?void 0:f.strings[null===e||void 0===e?void 0:e["@label"]]):o,Object(u.jsx)(fe,Object(v.a)(Object(v.a)({},O),{},{facetId:null===e||void 0===e?void 0:e["@name"],config:i,items:Array.isArray(null===e||void 0===e?void 0:e.category)?e.category:null!==e&&void 0!==e&&e.category?[e.category]:[],title:o,maxRows:(null===e||void 0===e?void 0:e.maxRows)||N,strings:null===(l=x)||void 0===l?void 0:l.strings,collapsed:j.collapsedFacets.includes(null===e||void 0===e?void 0:e["@name"]),selectedFacets:j.selectedFacets.filter((function(t){return t.facet===(null===e||void 0===e?void 0:e["@name"])})).map((function(e){return e.value})),onClickFacet:h,onClickFacetItem:g}),t)},_=[];return x.dimensions.forEach((function(e,t){var n=j.summary.dimension.find((function(t){return t["@name"]===e.key}));n&&_.push(Object(v.a)(Object(v.a)({},n),e))})),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"p-grid",children:Object(u.jsx)("div",{className:"p-col-12 p-mt-1 p-text-center",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("strong",{children:j.summary["@count"]}),Object(u.jsx)("span",{children:" resultado(s) encontrado(s)"})]})})}),j.summary["@count"]>0&&Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("div",{className:"p-grid p-mt-1",children:Object(u.jsx)("div",{className:"p-col-12 p-text-center",children:Object(u.jsxs)("span",{className:"p-buttonset",children:[Object(u.jsx)(a.a,{label:"Expandir",icon:"pi pi-plus-circle",className:"p-button-outlined p-button-sm",onClick:function(){m([])}}),Object(u.jsx)(a.a,{label:"Recolher",icon:"pi pi-minus-circle",className:"p-button-outlined p-button-sm",onClick:function(){m(_.map((function(e){return e["@name"]})))}})]})})}),Object(u.jsx)("div",{children:_.slice(0,y).map((function(e,t){return F(e,t)}))}),_.length>(null===(r=x)||void 0===r?void 0:r.maxDimensions)&&Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{className:"facet-extras-button",onClick:function(e){return S(!k)},children:k?"Ocultar filtros":"Mostrar mais filtros..."}),k&&Object(u.jsx)(o.a.Fragment,{children:_.slice(y).map((function(e,t){return F(e,t)}))})]})]})]})}n(1432);function pe(e){var t=e.core,n=e.viewer,o=e.mainMap,r=e.utils,c=e.actions,s=e.componentConfig,d=e.data,j=e.setCollapsedFacets,b=e.onSearch,p=e.onClearSearch,m=e.onSort,h=e.onClickFacet,g=e.onClickFacetItem,O=e.filters,x=e.filtersItems,y=e.onFilterChange,N={core:t,viewer:n,mainMap:o,utils:r,actions:c,componentConfig:s},C=S(s.url),w=Object(i.useState)(!1),k=Object(l.a)(w,2),F=k[0],_=k[1],D=Object(i.useState)(1),A=Object(l.a)(D,2),I=A[0],T=A[1],E=Object(i.useState)(null===d||void 0===d?void 0:d.sortBy),P=Object(l.a)(E,2),L=P[0],R=P[1],M=Object(i.useState)(null===d||void 0===d?void 0:d.sortOrder),B=Object(l.a)(M,2),q=B[0],W=B[1],z=null===s||void 0===s?void 0:s.sortOptions;Object(i.useEffect)((function(){_(!0)}),[]),Object(i.useEffect)((function(){F&&m(L,q)}),[L,q]);var Q=function(e){W(""),R(e.value)},G={layout:"FirstPageLink PrevPageLink CurrentPageReport RowsPerPageDropdown NextPageLink LastPageLink",RowsPerPageDropdown:function(e){return Object(u.jsx)(f.a,{value:e.value,options:[{label:10,value:10},{label:20,value:20},{label:50,value:50},{label:100,value:100}],itemTemplate:function(e){return Object(u.jsxs)("div",{children:[e.label," registos por p\xe1gina"]})},onChange:e.onChange,style:{height:"auto"},appendTo:document.body})},FirstPageLink:function(e){return Object(u.jsx)(a.a,{className:"p-button-rounded p-button-text",icon:"pi pi-angle-double-left",onClick:e.onClick,disabled:e.disabled})},PrevPageLink:function(e){return Object(u.jsx)(a.a,{className:"p-button-rounded p-button-text",icon:"pi pi-angle-left",onClick:e.onClick,disabled:e.disabled})},NextPageLink:function(e){return Object(u.jsx)(a.a,{className:"p-button-rounded p-button-text",icon:"pi pi-angle-right",onClick:e.onClick,disabled:e.disabled})},LastPageLink:function(e){return Object(u.jsx)(a.a,{className:"p-button-rounded p-button-text",icon:"pi pi-angle-double-right",onClick:e.onClick,disabled:e.disabled})},CurrentPageReport:function(e){return Object(u.jsxs)("span",{style:{color:"var(--text-color)",userSelect:"none",textAlign:"center"},children:[e.first<0?1:e.first," a ",e.last]})}},H=Object(u.jsxs)("div",{className:"p-grid p-nogutter",children:[Object(u.jsx)("div",{className:"p-col-12 p-mt-2 p-mb-2",style:{textAlign:"left"},children:Object(u.jsxs)("div",{children:[d.summary["@count"],Object(u.jsx)("span",{style:{fontWeight:"normal"},children:" resultado(s) encontrado(s)"})]})}),(null===z||void 0===z?void 0:z.length)>0?Object(u.jsx)("div",{className:"p-col-12",style:{textAlign:"right"},children:Object(u.jsx)(f.a,{options:z,value:L,optionLabel:"label",placeholder:"Ordenar por",valueTemplate:function(e){return Object(u.jsxs)("div",{children:["Ordenar por ",null===e||void 0===e?void 0:e.label]})},itemTemplate:function(e){return Object(u.jsx)("div",{children:e.label})},onChange:Q})}):null]}),V=Array.isArray(null===d||void 0===d?void 0:d.metadata)?d.metadata:null!==d&&void 0!==d&&d.metadata?[null===d||void 0===d?void 0:d.metadata]:[],J=parseInt(d["@from"]-1),U=d.rows||20;return Object(u.jsx)("div",{className:"p-mt-2",children:Object(u.jsxs)(X.b,{activeIndex:I,renderActiveOnly:!1,onTabChange:function(e){return T(e.index)},className:"metadata-list",children:[Object(u.jsxs)(X.a,{header:"Filtro",children:[Object(u.jsx)("div",{className:"p-fluid p-grid p-mt-2",children:Object(u.jsx)(Y,{url:C,float_labels:null===s||void 0===s?void 0:s.float_labels,filters:O,filtersItems:x,onFilterChange:y})}),Object(u.jsxs)("div",{className:"p-grid",children:[Object(u.jsx)("div",{className:"p-field p-col-6 p-text-center",children:Object(u.jsx)(a.a,{label:"Limpar",style:{minWidth:"6rem"},onClick:function(e){p()}})}),Object(u.jsx)("div",{className:"p-field p-col-6 p-text-center",children:Object(u.jsx)(a.a,{label:"Pesquisar",onClick:function(e){b({from:1,rows:U,callback:function(){T(1)}})}})})]}),Object(u.jsx)(be,Object(v.a)(Object(v.a)({},N),{},{data:d,config:(null===s||void 0===s?void 0:s.summary)||null,setCollapsedFacets:j,onClickFacet:h,onClickFacetItem:g}))]}),Object(u.jsx)(X.a,{header:"Resultados",children:d.summary["@count"]>0?Object(u.jsx)(K.a,{value:V,layout:"list",header:H,itemTemplate:function(e,t){return Object(u.jsx)(ce,Object(v.a)(Object(v.a)({},N),{},{data:e}))},lazy:!0,paginator:!0,alwaysShowPaginator:!1,paginatorPosition:"both",rows:U,totalRecords:d.summary["@count"],first:J,paginatorTemplate:G,pageLinkSize:1,onPage:function(e){b({from:e.first+1,rows:e.rows})}}):Object(u.jsx)("div",{className:"p-grid p-mt-4",children:Object(u.jsx)("div",{className:"p-col-12 p-text-center",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("strong",{children:d.summary["@count"]}),Object(u.jsx)("span",{children:" resultado(s) encontrado(s)"})]})})})})]})})}var me=[{id:"what",type:"AnySNIG",label:"O qu\xea?",query:"anysnig",options:{multi:!0}},{id:"where",type:"RegionsSNIG",query:"geometry",label:"Onde?"}],he={from:1,rows:20,sortBy:"",sortOrder:""},ge=null;function Oe(e){var t,n=e.core,r=e.viewer,c=e.mainMap,s=e.config,d=e.actions,f=e.catalog,h=e.utils,O=e.blockPanel,x=(s.Models,h.showOnPortal),y=h.getWindowSize,N=(r.config_json.selected_menu,Object(i.useState)(!1)),w=Object(l.a)(N,2),k=w[0],F=w[1],_=Object(i.useState)(null),D=Object(l.a)(_,2),A=D[0],I=D[1],T=Object(i.useState)((function(){var e=f||{};return e.sortOptions||(e.sortOptions=[{label:"Data de refer\xeancia",value:"referenceDateOrd"},{label:"Entidade respons\xe1vel",value:"orgNameSNIG"},{label:"T\xedtulo",value:"title"},{label:"Tema",value:"topicCatLang"}]),e})),E=Object(l.a)(T,2),P=E[0],L=E[1],R=Object(i.useState)((function(){var e=Object(v.a)({},he);if(Array.isArray(P.sortOptions)&&P.sortOptions.length>0){var t=P.sortOptions.find((function(e){return e.value===(null===P||void 0===P?void 0:P.sortBy)}));e.sortBy=t?null===P||void 0===P?void 0:P.sortBy:null===P||void 0===P?void 0:P.sortOptions[0].value}return e})),M=Object(l.a)(R,2),B=M[0],q=M[1],W=Object(i.useState)(null),z=Object(l.a)(W,2),Q=z[0],G=z[1],H=Object(i.useState)(null),V=Object(l.a)(H,2),J=V[0],U=V[1],K=Object(i.useState)(null!==P&&void 0!==P&&null!==(t=P.filters)&&void 0!==t&&t.length?Object(b.a)(null===P||void 0===P?void 0:P.filters):[].concat(me)),X=Object(l.a)(K,2),Z=X[0],$=X[1],ee=Object(i.useState)({}),te=Object(l.a)(ee,2),ne=te[0],le=te[1],ie=Object(i.useState)([]),oe=Object(l.a)(ie,2),ae=oe[0],re=oe[1],ce=Object(i.useState)([]),se=Object(l.a)(ce,2),ue=se[0],de=se[1],ve=(y(),S(null===P||void 0===P?void 0:P.url));function fe(e){ge.show({severity:"error",summary:"Ocorreu um erro inesperado",detail:e})}Object(i.useEffect)((function(){if(null!==f&&void 0!==f&&f.config_url){O(!0);var e=null===f||void 0===f?void 0:f.config_url;fetch(e).then((function(e){return e.json()})).then((function(e){if(e){var t,n=Object(v.a)({},he);if(Array.isArray(e.sortOptions)&&e.sortOptions.length>0){var l=e.sortOptions.find((function(t){return t.value===(null===e||void 0===e?void 0:e.sortBy)}));n.sortBy=l?null===e||void 0===e?void 0:e.sortBy:null===e||void 0===e?void 0:e.sortOptions[0].value}q(n);var i=Object(v.a)(Object(v.a)({},f),e||{});i.sortOptions||(i.sortOptions=[{label:"Data de refer\xeancia",value:"referenceDateOrd"},{label:"Entidade respons\xe1vel",value:"orgNameSNIG"},{label:"T\xedtulo",value:"title"},{label:"Tema",value:"topicCatLang"}]),L(i),(null===i||void 0===i||null===(t=i.filters)||void 0===t?void 0:t.length)>0&&$(Object(b.a)(null===i||void 0===i?void 0:i.filters))}})).catch((function(e){L(null),console.log("error",e)})).finally((function(){setTimeout((function(){return F(!0)}),300),O(!1)}))}else F(!0)}),[]),Object(i.useEffect)((function(){k&&je()}),[B,Q]),Object(i.useEffect)((function(){k&&je()}),[ue]);var je=function(e){var t=Y.getQueryParameters(Z,ne)||{};if(null!==ue&&void 0!==ue&&ue.length){var n=ue.map((function(e){return"".concat(e.facet,"/").concat(encodeURIComponent(e.value))})).join("&");t["facet.q"]=n}var l=(null===e||void 0===e?void 0:e.from)||B.from;t.from=l,t.to=l+B.rows-1,t.sortBy=(null===B||void 0===B?void 0:B.sortBy)||"",t.sortOrder=(null===B||void 0===B?void 0:B.sortOrder)||"",O(!0);var i=C(ve);return i[null!==P&&void 0!==P&&P.search_action&&i[null===P||void 0===P?void 0:P.search_action]?P.search_action:"searchCatalogSNIG"](t).then((function(e){if(!e)throw new Error("O resultado n\xe3o \xe9 v\xe1lido.");U(Object(v.a)({},e)),I("list"),Q&&Q()})).catch((function(e){console.log(e),fe("N\xe3o foi poss\xedvel executar a opera\xe7\xe3o.")})).finally((function(){return O(!1)})),!1};return null===P?Object(u.jsx)(j.a,{className:"p-col-12 p-mt-4 p-mb-4",severity:"error",text:"N\xe3o foi poss\xedvel carregar o cat\xe1logo."}):"list"===A?Object(u.jsxs)(o.a.Fragment,{children:[x(Object(u.jsx)(p.a,{ref:function(e){return ge=e}})),!1!==(null===P||void 0===P?void 0:P.show_content_header)?null!==P&&void 0!==P&&P.content_header?Object(u.jsx)(m,{config:P}):Object(u.jsx)(g,{}):null,Object(u.jsx)(pe,{core:n,viewer:r,mainMap:c,utils:h,actions:d,componentConfig:P,data:Object(v.a)(Object(v.a)({},J),{},{rows:B.rows,sortBy:B.sortBy,sortOrder:B.sortOrder,collapsedFacets:Object(b.a)(ae),selectedFacets:Object(b.a)(ue)}),filters:Z,filtersItems:ne,setError:fe,setCollapsedFacets:re,onSearch:function(e){q(Object(v.a)(Object(v.a)({},B),{},{from:e.from,rows:null===e||void 0===e?void 0:e.rows})),G((function(){return null===e||void 0===e?void 0:e.callback}))},onClearSearch:function(e){le({}),re([]),de([]),q(Object(v.a)(Object(v.a)({},B),{},{from:1})),G((function(){return null===e||void 0===e?void 0:e.callback}))},onSort:function(e,t){q(Object(v.a)(Object(v.a)({},B),{},{sortBy:e,sortOrder:t})),G(null)},onClickFacet:function(e){var t=Object(b.a)(ae);t.includes(e)?t=ae.filter((function(t){return t!==e})):t.push(e),re(t)},onClickFacetItem:function(e,t){var n=Object(b.a)(ue),l=n.find((function(n){return n.facet===e&&n.value===t}));n=n.filter((function(t){return t.facet!==e})),l||n.push({facet:e,value:t}),de(n)},onFilterChange:function(e,t){var n=Object(v.a)({},ne);n[e]=t.value||[],le(n)}})]}):Object(u.jsxs)(o.a.Fragment,{children:[x(Object(u.jsx)(p.a,{ref:function(e){return ge=e}})),!1!==(null===P||void 0===P?void 0:P.show_content_header)?null!==P&&void 0!==P&&P.content_header?Object(u.jsx)(m,{config:P}):Object(u.jsx)(g,{}):null,Object(u.jsx)("div",{className:"p-fluid p-grid p-pt-3",children:Object(u.jsx)(Y,{url:ve,float_labels:null===P||void 0===P?void 0:P.float_labels,filters:Z,filtersItems:ne,onFilterChange:function(e,t){var n=Object(v.a)({},ne);n[e]=t.value||[],le(n)}})}),Object(u.jsxs)("div",{className:"p-grid",children:[Object(u.jsx)("div",{className:"p-col"}),Object(u.jsx)("div",{className:"p-col p-text-right",children:Object(u.jsx)(a.a,{label:"Pesquisar",type:"button",onClick:function(e){e.preventDefault(),q(Object(v.a)(Object(v.a)({},B),{},{from:1})),G(null)}})})]})]})}function xe(e){var t=e.className,n=e.style,r=e.utils,c=e.catalog,s=r.getWindowSize,d=r.showOnPortal,v=Object(i.useState)(!1),f=Object(l.a)(v,2),j=f[0],b=f[1],p=Object(i.useState)(null),m=Object(l.a)(p,2),h=m[0],g=m[1],O=Object(i.useState)(!1),x=Object(l.a)(O,2),y=x[0],N=x[1],C=Object(i.useRef)(),w=null!==c&&void 0!==c&&c.help?c.help:{},k=s()[0]<=768,S=e.showButton||(null===w||void 0===w?void 0:w.url)||(null===w||void 0===w?void 0:w.html)||(null===w||void 0===w?void 0:w.description)||(null===c||void 0===c?void 0:c.description),F=!0===e.disabled||!(null!==w&&void 0!==w&&w.url||null!==w&&void 0!==w&&w.html||null!==w&&void 0!==w&&w.description||null!==c&&void 0!==c&&c.description);if("popup"===w.as&&S){return Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)(a.a,{ref:function(e){e&&e.style.setProperty("border-radius","50%","important")},title:(null===w||void 0===w?void 0:w.title)||(null===c||void 0===c?void 0:c.title)||"Informa\xe7\xe3o",className:t,style:n,icon:"pi pi-info-circle",disabled:F,onClick:function(e){e.preventDefault(),b(!0)}}),d(Object(u.jsx)(ee.a,{ref:C,header:(null===w||void 0===w?void 0:w.title)||(null===c||void 0===c?void 0:c.title)||"Informa\xe7\xe3o",visible:j,style:{width:k?"90%":"50vw",height:"80%"},maximizable:!0,maximized:y,modal:!0,footer:Object(u.jsx)("div",{className:"p-grid",children:Object(u.jsx)("div",{className:"p-col",style:{textAlign:"right"},children:Object(u.jsx)(a.a,{label:"Fechar",onClick:function(e){return b(!1)}})})}),onShow:function(){var e=C.current.contentEl;g({x:e.clientWidth,y:e.clientHeight-25})},onResize:function(e){var t=C.current.contentEl;g({x:t.clientWidth,y:t.clientHeight-25})},onMaximize:function(e){N(e.maximized);var t=C.current.contentEl;setTimeout((function(){g({x:t.clientWidth,y:t.clientHeight-25},200)}))},onHide:function(e){return b(!1)},children:w.url?Object(u.jsx)("iframe",{title:w.title||"Ajuda",src:w.url,style:h?{border:"none",width:"100%",height:h.y}:{border:"none",width:"100%"}}):w.html?Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:w.html}}):w.description||c.description?Object(u.jsx)("div",{children:c.description||c.description||""}):null}))]})}return"external"===w.as&&S?Object(u.jsx)(a.a,{title:(null===w||void 0===w?void 0:w.title)||(null===c||void 0===c?void 0:c.title)||"Informa\xe7\xe3o",className:t,icon:"pi pi-info-circle",disabled:e.disabled||!w.url,onClick:function(e){e.preventDefault(),window.open(w.url)}}):e.showButton?Object(u.jsx)(a.a,{title:(null===w||void 0===w?void 0:w.title)||(null===c||void 0===c?void 0:c.title)||"Informa\xe7\xe3o",className:t,icon:"pi pi-info-circle",disabled:!0}):null}function ye(e){var t=e.core,n=e.viewer,a=e.mainMap,r=e.config,c=e.actions,s=e.record,d=e.utils,b=e.blockPanel,p=Object(i.useState)(-1),m=Object(l.a)(p,2),h=m[0],g=m[1],O=Object(i.useState)([]),x=Object(l.a)(O,2),y=x[0],N=x[1];Object(i.useEffect)((function(){var e;if(Array.isArray(null===s||void 0===s?void 0:s.catalogs))N(null===s||void 0===s?void 0:s.catalogs.map((function(e,t){return{label:e.title,value:t,data:e}})));else if(null!==s&&void 0!==s&&null!==(e=s.catalogs)&&void 0!==e&&e.url){var t,n=null===s||void 0===s||null===(t=s.catalogs)||void 0===t?void 0:t.url;fetch(n).then((function(e){return e.json()})).then((function(e){Array.isArray(e)&&N(e.map((function(e,t){return{label:e.title,value:t,data:e}})))})).catch((function(e){console.log("error",e)}))}}),[]);var C=h>=0?Object(v.a)(Object(v.a)({},y[h].data),{},{show_content_header:s.show_content_header,key:"cat".concat(h)}):null;return Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsx)("div",{className:"p-fluid p-grid",children:Object(u.jsxs)("div",{className:"p-col-12",children:[Object(u.jsx)("h3",{children:"Cat\xe1logos de Metadados"}),h<0&&Object(u.jsx)(j.a,{className:"p-mt-2 p-mb-4",severity:"info",text:"Escolha um dos cat\xe1logos de metadados dispon\xedveis"}),Object(u.jsxs)("div",{className:"p-inputgroup p-mt-2",children:[Object(u.jsx)(f.a,{value:h,placeholder:"Cat\xe1logos...",emptyMessage:"N\xe3o existem cat\xe1logos",options:y,itemTemplate:function(e){return Object(u.jsx)("div",{children:e.label})},onChange:function(e){return g(e.value)}}),Object(u.jsx)(xe,{className:"p-button-rounded p-button-text p-ml-1 p-mt-1 btn-help",utils:d,catalog:C,showButton:!0,disabled:h<0})]})]})}),h>=0&&Object(u.jsx)(Oe,{core:t,config:r,actions:c,viewer:n,mainMap:a,catalog:C,utils:d,blockPanel:b},"cat".concat(h))]})}function Ne(e){var t=e.className,n=e.config,l=e.actions,i=e.record,o=null===i||void 0===i?void 0:i.title;return Object(u.jsx)(d,{title:o,className:t,config:n,actions:l,record:i})}function Ce(e){var t,n=e.className,l=e.config,i=e.actions,o=e.record,r=(null===o||void 0===o?void 0:o.title)||"Cat\xe1logo de Metadados";return o&&"mainmenu"===o.target?null!==o&&void 0!==o&&null!==(t=o.config_json)&&void 0!==t&&t.btn_image?Object(u.jsx)(a.a,{title:r,className:n?n+" catalog-snig-main-menu-btn":null,icon:"pi",style:{margin:"0.5em 1em",backgroundImage:'url("'.concat(o.config_json.btn_image,'")')},onClick:function(e){return l.dispatch(i.viewer_set_selectedmenu(o.id))}}):Object(u.jsx)(a.a,{title:r,className:n,icon:"pi pi-book",style:{margin:"0.5em 1em"},onClick:function(e){return l.dispatch(i.viewer_set_selectedmenu(o.id))}}):null}function we(e){var t=e.as,n=e.core,o=e.config,a=e.actions,s=e.record,d=e.utils,v=o.viewer,f=o.mainMap,j=s.config_json||{},b=j.header,p=Object(i.useRef)(null),m=Object(i.useState)(!1),h=Object(l.a)(m,2),g=h[0],O=h[1],x=null!==o&&void 0!==o&&o.classname?"catolog-snig ".concat(null===o||void 0===o?void 0:o.classname):"catolog-snig";function y(){var e;return Array.isArray(null===j||void 0===j?void 0:j.catalogs)||null!==j&&void 0!==j&&null!==(e=j.catalogs)&&void 0!==e&&e.url?Object(u.jsx)(ye,{core:n,config:o,actions:a,viewer:v,mainMap:f,record:null===s||void 0===s?void 0:s.config_json,utils:d,blockPanel:O}):Object(u.jsx)(Oe,{core:n,config:o,actions:a,viewer:v,mainMap:f,catalog:null===s||void 0===s?void 0:s.config_json,utils:d,blockPanel:O})}return"panel"===t?Object(u.jsxs)("div",{ref:p,className:"p-blockui-container",style:{height:"calc(100%)"},children:[Object(u.jsx)(r.a,{header:b,className:x,children:y()}),g&&Object(u.jsx)("div",{className:"p-blockui p-component-overlay p-component-overlay-enter",style:{zIndex:1003,height:function(){var e=p.current,t=0,n=0;try{t=e.clientHeight;var l=e.style.overflow,i=e.style.height;e.style.overflow="",e.style.height="",n=e.offsetHeight,e.style.height=i,e.style.overflow=l}catch(o){}return t>n?t:n}()},children:Object(u.jsx)(c.a,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"#EEEEEE",animationDuration:".5s"})})]}):y()}},1429:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j}));n(146),n(22);var l=n(3),i=n(44),o=n(43),a=n(306),r=n(49),c=n(50),s=n(1433),u=n(1413),d=n(35),v=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e,l){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(o.a)(this,n),i=t.call(this,e),Object.setPrototypeOf(Object(a.a)(i),n.prototype),i.name=i.constructor.name,"function"===typeof Error.captureStackTrace?Error.captureStackTrace(Object(a.a)(i),i.constructor):i.stack=new Error(e).stack,i.stack=(new Error).stack,i.status=l,i.body=r,i}return Object(i.a)(n)}(Object(s.a)(Error)),f=function(e,t){var n=e.headers||new Headers({Accept:"application/json"});if(n.has("Content-Type")||e&&(!e.method||"GET"===e.method)||e&&e.body&&e.body instanceof FormData||n.set("Content-Type","application/json"),t)if(e.user&&e.user.authenticated&&e.user.token)n.set("X-API-KEY",e.user.token);else{var l=(new d.a).get("scalargis_webgis");l&&l.token&&n.set("X-API-KEY",l.token)}return n},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=f(t);return fetch(e,Object(l.a)(Object(l.a)({},t),{},{headers:n})).then((function(e){return e.text().then((function(t){return{status:e.status,statusText:e.statusText,headers:e.headers,body:t}}))})).then((function(e){var t,n=e.status,l=e.statusText,i=e.headers,o=e.body;try{t=JSON.parse(o)}catch(a){}return n<200||n>=300?Promise.reject(new v(t&&t.message||l,n,t)):Promise.resolve({status:n,headers:i,body:o,json:t})}))};u.stringify}).call(this,n(132).Buffer)},1431:function(e){e.exports=JSON.parse('{"maxDimensions":5,"maxRows":5,"dimensions":[{"key":"dataPolicy","label":"Pol\xedtica de dados","className":"","strings":{"dataPolicy_undefined":"N\xe3o definida"}},{"key":"openServiceType","label":"Servi\xe7os","strings":{"viewAndDowload":"Visualiza\xe7\xe3o e descarregamento","view":"Visualiza\xe7\xe3o","download":"Descarregamento","openServiceType_undefined":"Sem servi\xe7os"}},{"key":"topicCat","title":"Tema"},{"key":"orgNameSNIG","title":"Entidade Respons\xe1vel","type":"Search"},{"key":"geographicCoverageDesc","title":"Cobertura Geogr\xe1fica","sortOrder":"Desc","strings":{"geographicCoverage_undefined":"N\xe3o definida"}},{"key":"cartografia","title":"Cartografia","strings":{"cartografia_undefined":"N\xe3o definida"}},{"key":"dataType","title":"Tipo de Dados","strings":{"vector, shp":"Vector, shp","dataType_other":"Outros","dataType_undefined":"N\xe3o definido"}},{"key":"denominatorRange","title":"Escala","sortField":"@value","sortOrder":"Desc","strings":{"01_100000":"Inferior a 1:100 000","02_10000_100000":"De 1:10 000 a 1:100 000","03_10000":"Igual ou superior a 1:10 000","denominator_undefined":"N\xe3o definida"}},{"key":"resolutionRange","title":"Resolu\xe7\xe3o","sortField":"@value","sortOrder":"Desc","strings":{"01_100":"Inferior a 100 m","02_10_100":"De 10 a 100 m","03_10":"Igual ou superior a 10m","resolution_undefined":"N\xe3o definida"}},{"key":"referenceDateRange","title":"Data de Refer\xeancia","sortField":"@value","sortOrder":"Desc","strings":{"01_2015_higher":"2015 ou posterior","02_2005_2015":"Entre 2005 e 2015","03_2005_lower":"Anterior a 2005"}},{"key":"inspirecore","title":"Reportados Diretiva INSPIRE","strings":{"INSPIRECORE":"Sim"}},{"key":"dataFormat","title":"Formatos de Distribui\xe7\xe3o","strings":{"dataFormat_other":"Outros","dataFormat_undefined":"N\xe3o definido"}}]}')},1432:function(e,t,n){}}]);